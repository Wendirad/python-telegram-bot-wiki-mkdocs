<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
    <link rel="shortcut icon" href="../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Types of Handlers - python telegram bot wiki</title>
    <link href="../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/highlight.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../js/jquery-3.2.1.min.js"></script>
    <script src="../js/bootstrap-3.3.7.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "CommandHandlers with arguments", url: "#_top", children: [
              {title: "Deep-Linking start parameters", url: "#deep-linking-start-parameters" },
          ]},
          {title: "Pattern matching: The RegexHandler", url: "#pattern-matching-the-regexhandler", children: [
          ]},
        ];

    </script>
    <script src="../js/base.js"></script>
      <script src="../search/main.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../Extensions-–-Advanced-Filters/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../Extensions-–-Advanced-Filters/" class="btn btn-xs btn-link">
        Advanced Filters
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../Extensions-–-JobQueue/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../Extensions-–-JobQueue/" class="btn btn-xs btn-link">
        Job Queue
      </a>
    </div>
    
  </div>

    

    <p>A <code>Handler</code> is an instance derived from the base class <a href="https://python-telegram-bot.readthedocs.io/en/latest/telegram.ext.handler.html#telegram.ext.Handler">telegram.ext.Handler</a> which is responsible for the routing of different kinds of updates (text, audio, inlinequery, button presses, ...) to their <em>corresponding callback function</em> in your code.</p>
<p>For example, if you want your bot to respond to the command <code>/start</code>, you can use a <a href="https://python-telegram-bot.readthedocs.io/en/latest/telegram.ext.commandhandler.html">CommandHandler</a> that maps this user input to a callback named <code>start_callback</code>:</p>
<pre><code>def start_callback(update, context):
    update.message.reply_text(&quot;Welcome to my awesome bot!&quot;)

...

dispatcher.add_handler(CommandHandler(&quot;start&quot;, start_callback))
</code></pre>

<h2 id="commandhandlers-with-arguments">CommandHandlers with arguments</h2>
<p>It is also possible to work with parameters for commands offered by your bot. Let's extend the <code>start_callback</code> with some arguments so that the user can provide additional information in the same step:</p>
<pre><code>def start_callback(update, context):
    user_says = &quot; &quot;.join(context.args)
    update.message.reply_text(&quot;You said: &quot; + user_says)

...

dispatcher.add_handler(CommandHandler(&quot;start&quot;, start_callback))
</code></pre>

<p>Sending "/start Hello World!" to your bot will now split everything after /start separated by the space character into a list of words and pass it on to the <code>args</code> parameter of <code>context</code>: <code>["Hello", "World!"]</code>. We join these chunks together by calling <code>" ".join(context.args)</code> and echo the resulting string back to the user.</p>
<h3 id="deep-linking-start-parameters">Deep-Linking start parameters</h3>
<p>The argument passing described above works exactly the same when the user clicks on a deeply linked start URL, like this one:</p>
<p><a href="https://t.me/roolsbot?start=Hello_World!">https://t.me/roolsbot?start=Hello_World!</a></p>
<p>Clicking this link will open your Telegram Client and show a big START button. When it is pressed, the URL parameters "Hello_World!" will be passed on to the <code>args</code> of your context object.</p>
<p>Note that since telegram doesn't support spaces in deep linking parameters, you will have to manually split the single <code>Hello_World</code> argument, into <code>["Hello", "World!"]</code> (using <code>context.args[0].split('_')</code> for example)</p>
<p>You also have to pay attention to the maximum length accepted by Telegram itself. As stated in the <a href="https://core.telegram.org/bots#deep-linking">documentation</a> the maximum length for the start parameter is 64.</p>
<p>Also, since this is an URL parameter, you have to pay attention on how to correctly pass the values in order to  avoid passing URL reserved characters. Consider the usage of <code>base64.urlsafe_b64encode</code>.</p>
<h2 id="pattern-matching-the-regexhandler">Pattern matching: The RegexHandler</h2>
<p>Warning: Regexhandler is being deprecated. See our <a href="https://github.com/python-telegram-bot/python-telegram-bot/wiki/Transition-guide-to-Version-12.0">Transition guide</a> for more information.</p>
<p>For more complex inputs you can employ the <a href="https://python-telegram-bot.readthedocs.io/en/latest/telegram.ext.regexhandler.html">telegram.ext.RegexHandler</a>, which internally uses the <code>re</code>-module to match textual user input with a supplied pattern.</p>
<p>Keep in mind that for extracting URLs, #Hashtags, @Mentions, and other Telegram entities, there's no need to parse them with a <code>RegexHandler</code> because the Bot API already sends them to us with every update. Refer to <a href="https://github.com/python-telegram-bot/python-telegram-bot/wiki/Code-snippets#message-entities">this snippet</a> to learn how to work with entities instead.</p>
<p>This tutorial only covers some of the available handlers (for now). Refer to the documentation for all other types: https://python-telegram-bot.readthedocs.io/en/latest/telegram.ext.html#handlers</p>

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../Extensions-–-Advanced-Filters/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../Extensions-–-Advanced-Filters/" class="btn btn-xs btn-link">
        Advanced Filters
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../Extensions-–-JobQueue/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../Extensions-–-JobQueue/" class="btn btn-xs btn-link">
        Job Queue
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="col-md-12 wm-page-content">
  <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="">Windmill Dark</a> theme by None (noraj).</p>
</footer>

</body>
</html>